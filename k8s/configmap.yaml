apiVersion: v1
kind: ConfigMap
metadata:
  name: order-service-config
  namespace: commerce
  labels:
    app: order-service
data:
  # Server Configuration
  SERVER_PORT: "8080"

  # Application Configuration
  SPRING_PROFILES_ACTIVE: "dev"
  SPRING_APPLICATION_NAME: "order-service"

  # Database Configuration - 독립 DB 사용
  DB_HOST: "order-service-mariadb"
  DB_PORT: "3306"
  DB_NAME: "commerce-order"
  DB_USERNAME: "admin"

  # JWT Configuration (non-sensitive)
  JWT_EXPIRATION: "86400"          # 24 hours
  JWT_REFRESH_EXPIRATION: "604800" # 7 days

  # Swagger Configuration
  SWAGGER_UI_ENABLED: "true"
  SPRINGDOC_SHOW_ACTUATOR: "true"

  # JPA Configuration
  SPRING_JPA_OPEN_IN_VIEW: "false"
  SPRING_JPA_HIBERNATE_DDL_AUTO: "validate"
  SPRING_JPA_SHOW_SQL: "false"

  # Flyway Configuration
  SPRING_FLYWAY_ENABLED: "true"
  SPRING_FLYWAY_BASELINE_ON_MIGRATE: "true"

  # HikariCP Configuration
  SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE: "10"
  SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE: "2"
  SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT: "30000"
  SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT: "600000"
  SPRING_DATASOURCE_HIKARI_MAX_LIFETIME: "1800000"
  SPRING_DATASOURCE_HIKARI_LEAK_DETECTION_THRESHOLD: "60000"

  # Kafka Configuration
  SPRING_KAFKA_BOOTSTRAP_SERVERS: "host.k3d.internal:9092"
